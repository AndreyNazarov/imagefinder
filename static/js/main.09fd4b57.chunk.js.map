{"version":3,"sources":["components/SearchBar/SearchBar.js","services/apiService.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/PicturesErrorView/PicturesErrorView.js","components/Loader/Loader.js","components/Button/Button.js","components/PicturesInfo/PicturesInfo.js","App.js","index.js"],"names":["SearchBar","state","input","handleNameChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","API","fetchPictures","query","page","fetch","then","response","ok","json","Promise","reject","Error","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","console","log","src","alt","createPortal","onClick","ImageGalleryItem","showModal","toggleModal","largePicture","ImageGallery","pictures","map","picture","index","webformatURL","tags","largeImageURL","PicturesErrorView","message","role","App","color","height","width","timeout","Button","scroll","setTimeout","scrollTo","top","documentElement","scrollHeight","behavior","PicturesInfo","status","onLoadMore","prevState","prevProps","prevRequest","picturesName","nextRequest","prevPage","nextPage","apiService","newPictures","total","hits","catch","handleSubmitForm","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.09fd4b57.chunk.js","sourcesContent":["import \"./SearchBarStyles.css\";\r\nimport { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default class SearchBar extends Component {\r\n  state = {\r\n    input: \"\",\r\n  };\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n  };\r\n\r\n  handleNameChange = (event) => {\r\n    this.setState({ input: event.currentTarget.value.toLowerCase() });\r\n  };\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (this.state.input.trim() === \"\") {\r\n      toast.error(\"Write your request,please\");\r\n      return;\r\n    }\r\n    this.props.onSubmit(this.state.input);\r\n    this.setState({ input: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.input}\r\n            onChange={this.handleNameChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","function fetchPictures(query, page) {\r\n  const BASE_URL = \"https://pixabay.com/api/\";\r\n  const API_KEY = \"18616543-61f088c3928fc4bac834774e6\";\r\n  return fetch(\r\n    `${BASE_URL}?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=12&key=${API_KEY}`\r\n  ).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(new Error(\"Something is wrong, please try again\"));\r\n  });\r\n}\r\n\r\nconst API = {\r\n  fetchPictures,\r\n};\r\n\r\nexport default API;\r\n","import \"./ModalStyles.css\";\r\nimport React, { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = (event) => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    console.log(\"Modal render\");\r\n    const { src, alt } = this.props;\r\n\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\r\n        <div className=\"Modal\">\r\n          <img src={src} alt={alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\nModal.propTypes = {\r\n  alt: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport \"./ImageGalleryItemStyles.css\";\r\n\r\nexport default class ImageGalleryItem extends Component {\r\n  state = {\r\n    showModal: false,\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { src, alt, largePicture } = this.props;\r\n    const { showModal } = this.state;\r\n\r\n    return (\r\n      <li className=\"ImageGalleryItem\">\r\n        <img\r\n          onClick={this.toggleModal}\r\n          src={src}\r\n          alt={alt}\r\n          className=\"ImageGalleryItemImage\"\r\n        />\r\n        {showModal && (\r\n          <Modal onClose={this.toggleModal} src={largePicture} alt={alt} />\r\n        )}\r\n      </li>\r\n    );\r\n  }\r\n}\r\n","import \"./ImageGallery.css\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nexport default function ImageGallery({ pictures }) {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {pictures.map((picture, index) => (\r\n        <ImageGalleryItem\r\n          src={picture.webformatURL}\r\n          alt={picture.tags}\r\n          largePicture={picture.largeImageURL}\r\n          key={index}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n","export default function PicturesErrorView({ message }) {\r\n  return (\r\n    <div role=\"alert\">\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n","import { Component } from \"react\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"./LoaderStyles.css\";\r\n\r\nexport default class App extends Component {\r\n  render() {\r\n    return (\r\n      <Loader\r\n        className=\"Loader\"\r\n        type=\"Circles\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import { Component } from \"react\";\r\nimport \"./ButtonStyles.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default class Button extends Component {\r\n  scroll = () => {\r\n    this.props.onClick();\r\n    setTimeout(() => {\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: \"smooth\",\r\n      });\r\n    }, 1200);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <button onClick={this.scroll} type=\"button\" className=\"Button\">\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n","import { Component } from \"react\";\r\nimport apiService from \"../../services/apiService\";\r\nimport ImageGallery from \"../ImageGallery/\";\r\nimport PicturesErrorView from \"../PicturesErrorView/PicturesErrorView\";\r\nimport Loader from \"../Loader/Loader\";\r\nimport Button from \"../Button/Button\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default class PicturesInfo extends Component {\r\n  state = {\r\n    pictures: [],\r\n    page: 1,\r\n    error: null,\r\n    status: \"idle\",\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevRequest = prevProps.picturesName;\r\n    const nextRequest = this.props.picturesName;\r\n    const prevPage = prevState.page;\r\n    const nextPage = this.state.page;\r\n    console.log(\"componentDidUpdate PicturesInfo Start\");\r\n\r\n    if (prevRequest !== nextRequest) {\r\n      this.setState({ page: 1 });\r\n      console.log(\"PrevPage !== NextPage\", this.setState);\r\n      console.log(\"page in check\");\r\n    }\r\n\r\n    if (prevRequest !== nextRequest || prevPage !== nextPage) {\r\n      this.setState({ status: \"pending\" });\r\n      apiService\r\n        .fetchPictures(nextRequest, nextPage)\r\n        .then((newPictures) => {\r\n          if (newPictures.total !== 0) {\r\n            this.setState((prevState) => ({\r\n              pictures: [...prevState.pictures, ...newPictures.hits],\r\n              status: \"resolved\",\r\n            }));\r\n            console.log(\"`Картинки из фетча` : newPictures\");\r\n            return;\r\n          }\r\n          return Promise.reject(new Error(\"Invalid request\"));\r\n        })\r\n        .catch((error) => this.setState({ error, status: \"rejected\" }));\r\n    }\r\n  }\r\n\r\n  onLoadMore = () => {\r\n    this.setState((prevState) => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n    console.log(\"page\");\r\n  };\r\n\r\n  render() {\r\n    const { pictures, error, status, page } = this.state;\r\n\r\n    if (status === \"idle\") {\r\n      return <h1>Введите свой запрос</h1>;\r\n    }\r\n    if (status === \"pending\") {\r\n      return <Loader />;\r\n    }\r\n    if (status === \"rejected\") {\r\n      return <PicturesErrorView message={error.message} />;\r\n    }\r\n    if (status === \"resolved\") {\r\n      return (\r\n        <>\r\n          <ImageGallery pictures={pictures} />\r\n          <Button onClick={this.onLoadMore} page={page} />\r\n        </>\r\n      );\r\n    }\r\n  }\r\n}\r\nPicturesInfo.propTypes = {\r\n  message: PropTypes.string,\r\n  onClick: PropTypes.func,\r\n};\r\n","import React, { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"./App.css\";\nimport SearchBar from \"./components/SearchBar/SearchBar\";\nimport PicturesInfo from \"./components/PicturesInfo/PicturesInfo\";\n\nexport default class App extends Component {\n  state = {\n    picturesName: \"\",\n  };\n\n  handleSubmitForm = (picturesName) => {\n    this.setState({ picturesName });\n    console.log(\"request handleSubmitForm App\");\n  };\n\n  render() {\n    return (\n      <div>\n        <SearchBar onSubmit={this.handleSubmitForm} />\n        <PicturesInfo picturesName={this.state.picturesName} />\n        <ToastContainer autoClose={2000} />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}